<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="ios, android, music" />





  <link rel="alternate" href="/atom.xml" title="菜菜园子" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta property="og:type" content="website">
<meta property="og:title" content="菜菜园子">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="菜菜园子">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="菜菜园子">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/"/>

  <title> 菜菜园子 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">菜菜园子</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/18/24-Loppers-Handlers-and-HandlerThread/" itemprop="url">
                  24. Loppers, Handlers, and HandlerThread
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-18T11:19:58+08:00" content="2016-10-18">
              2016-10-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>粗略的过了一遍，感觉基本没有看懂 ~~~<br>10月25日，终于又找了个风和日丽，中午小憩了一会儿的下午，把这章又细细的从头到尾看了一遍，总算明白了。</p>
<p>简言之如下：<br>1，每个Thread有一个Looper用来处理消息队列<br>2，Looper里的消息可以用若干Handler来处理<br>3，在某Thread Context里new出来的Handler就在某Thread执行</p>
<p>##<br>Thread的Code表象：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ThumbnailDownloader&lt;T&gt; extends HandlerThread</div></pre></td></tr></table></figure>
<p>其中T为一个ViewHolder，图片完成下载后，bindData给ViewHolder</p>
<p>##<br>UI线程需要new出Thread以处理图片下载</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// 在fragment的onCreate()中</div><div class="line">mThumbnailDownloader = new ThumbnailDownloader&lt;&gt;(responseHandler);</div><div class="line">mThumbnailDownloader.start();</div><div class="line">mThumbnailDownloader.getLooper();</div><div class="line"></div><div class="line">// 在fragment的onDestroy()中</div><div class="line">mThumbnailDownloader.quit();</div></pre></td></tr></table></figure>
<p>##<br>HandlerThread的子类需要实现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">// 被主线程调用时需要，发送Message到Looper的Message队列</div><div class="line">mRequestHandler.obtainMessage(MESSAGE_DOWNLOAD, target)</div><div class="line">                    .sendToTarget();</div><div class="line"></div><div class="line">// 需要重载实现onLooperPrepared()，在其中new出各个Handler来处理Message</div><div class="line">	@Override</div><div class="line">    protected void onLooperPrepared() &#123;</div><div class="line">        mRequestHandler = new Handler() &#123;</div><div class="line">            @Override</div><div class="line">            public void handleMessage(Message msg) &#123;</div><div class="line">                if (msg.what == MESSAGE_DOWNLOAD) &#123;</div><div class="line">                    T target = (T) msg.obj;</div><div class="line">                    Log.i(TAG, &quot;Got a request for URL: &quot; + mRequestMap.get(target));</div><div class="line">                    handleRequest(target);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>##<br>图片下载完成后，需要调用UI线程的Handler，让UI线程的Looper去处理更新页面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">// HandlerThread初始化时传入了UI线程里的Handler实例</div><div class="line">Handler responseHandler = new Handler();</div><div class="line">mThumbnailDownloader = new ThumbnailDownloader&lt;&gt;(responseHandler);</div></pre></td></tr></table></figure>
<p>HandlerThread的子类通过UI线程的Handler，来发送Message，一个Runnable就是一个Message</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">mResponseHandler.post(new Runnable() &#123;</div><div class="line">    public void run() &#123;</div><div class="line">        if (mRequestMap.get(target) != url) &#123;</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        mRequestMap.remove(target);</div><div class="line">        mThumbnailDownloadListener.onThumbnailDownloaded(target, bitmap);</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>##<br>发过去的消息，在UI线程执行，但是执行的是HandlerThread的子类里的方法（Runnable的run()方法）<br>所以，需要类似delegate或listener的方式，让HandlerThread来调用UI类的方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">// UI类里</div><div class="line">mThumbnailDownloader.setThumbnailDownloadListener(</div><div class="line">    new ThumbnailDownloader.ThumbnailDownloadListener&lt;PhotoHolder&gt;() &#123;</div><div class="line">        @Override</div><div class="line">        public void onThumbnailDownloaded(PhotoHolder photoHolder, Bitmap bitmap) &#123;</div><div class="line">            Drawable drawable = new BitmapDrawable(getResources(), bitmap);</div><div class="line">            photoHolder.bindDrawable(drawable);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">);</div><div class="line"></div><div class="line">// HandlerThread里提供setListener或delegate属性</div><div class="line">public void setThumbnailDownloadListener(ThumbnailDownloadListener&lt;T&gt; listener) &#123;</div><div class="line">    mThumbnailDownloadListener = listener;</div><div class="line">&#125;</div><div class="line"></div><div class="line">public ThumbnailDownloader(Handler responseHandler) &#123;</div><div class="line">    super(TAG);</div><div class="line">    mResponseHandler = responseHandler;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>##<br>上述就是Android下线程间通信的大概了，总算可以继续进行下去了，顺利的话，11月前争取整本书过一遍！</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/18/23-HTTP-Background-Tasks/" itemprop="url">
                  23. HTTP & Background Tasks
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-18T10:28:23+08:00" content="2016-10-18">
              2016-10-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这章重要，也不重要，重要在于网络请求无论哪个App都会用到，AsyncTask应该不仅仅可以用于网络请求。不重要在于，在我的android体系里，okhttp, gson为首选的被证实优秀的网络框架。</p>
<font color="red"><br>吐槽的一点是，一般国外的书都用的Flickr，而在兲朝Flickr几乎不可用，所以每每想做demo，都下不得手。<br></font>

<p>所以，还是粗略记录吧，就不敲code了。</p>
<font color="green"><br>HttpURLConnection，这个基本已经被google废弃了吧<br><br>Uri parse() buildUpon() appendQueryParameter()，这些算是生成 GET 形式 url 的一些便利方法<br><br>JSONObject，JSONArray，用来解析Json的原生类，可以完全用Gson代替<br><br>重点看下AsyncTask<br>AsyncTask enables proper and easy use of the UI thread. This class allows to perform background operations and publish results on the UI thread without having to manipulate threads and/or handlers.<br><br>AsyncTask is designed to be a helper class around Thread and Handler and does not constitute a generic threading framework.<br><br>AsyncTasks should ideally be used for short operations (a few seconds at the most.) If you need to keep threads running for long periods of time, it is highly recommended you use the various APIs provided by the java.util.concurrent package such as Executor, ThreadPoolExecutor and FutureTask.<br><br>An asynchronous task is defined by a computation that runs on a background thread and whose result is published on the UI thread. An asynchronous task is defined by 3 generic types, called Params, Progress and Result, and 4 steps, called <code>onPreExecute</code>, <code>doInBackground</code>, <code>onProgressUpdate</code> and <code>onPostExecute</code>.<br></font>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">private class FetchItemsTask extends AsyncTask&lt;Void,Void,List&lt;GalleryItem&gt;&gt; &#123;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected List&lt;GalleryItem&gt; doInBackground(Void... params) &#123;</div><div class="line">        return new FlickrFetchr().fetchItems();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void onPostExecute(List&lt;GalleryItem&gt; items) &#123;</div><div class="line">        mItems = items;</div><div class="line">        setupAdapter();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后在主线程调用，<code>new FetchItemsTask().execute();</code></p>
<p>task.execute(“param1”, “param2”, “etc”);</p>
<p>public Void doInBackground(Void… params) {</p>
<p>}</p>
<p>在doInBackground()中调用publishProgress()，则主线程中onProgressUpdate()会被回调</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/17/22-More-About-Intents-and-Tasks/" itemprop="url">
                  22. More About Intents and Tasks
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-17T13:51:40+08:00" content="2016-10-17">
              2016-10-17
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>恩，看来越往后进度确实越慢了些。今天才把这章过了一遍，其实intent, task这些暂时用不到的，可以等到用的时候再详细的看一遍。所以本章最重要的一点是，再次把recyclerview的流程过了一遍，越来越熟了，已经能基本不参考以前的代码徒手写出了。但是：<br>1，命名由于没有定规则，起的还是乱七八糟的<br>2，对于不同layout里的常用的attribute及其作用还是搞不定，目前基本是baidu或google查找</p>
<font color="green"><br>PackageManager<br></font>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Intent startupIntent = new Intent(Intent.ACTION_MAIN);</div><div class="line">startupIntent.addCategory(Intent.CATEGORY_LAUNCHER);</div><div class="line">PackageManager pm = getActivity().getPackageManager();</div><div class="line">List&lt;ResolveInfo&gt; datas = pm.queryIntentActivities(startupIntent, 0);</div></pre></td></tr></table></figure>
<p>以下几点还没有太记清楚，温习一遍：</p>
<p>Adaptor里 <code>LayoutInflater inflater = LayoutInflater.from(getActivity());</code><br>layout xml里 <code>gravity -&gt; TextView 和 layout_gravity -&gt; LinearLayout</code></p>
<font color="green"><br>ResolveInfo<br><br>ActivityInfo<br></font>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ActivityInfo ai = data.activityInfo;</div><div class="line">Intent i = new Intent(Intent.ACTION_MAIN)</div><div class="line">        .setClassName(ai.applicationInfo.packageName, ai.name);</div><div class="line">startActivity(i);</div></pre></td></tr></table></figure>
<font color="green"><br>overview screen， 就是点击”方块”型的虚拟按键，然后弹出最近使用程序的View<br></font>

<font color="red"><br>几个属性，大体理解了，但是完全记不住，用到的时候需要google帮助<br><br><em> FLAG_ACTIVITY_NEW_TASK
</em> “android.intent.action.MAIN”<br><em> “android.intent.category.LAUNCHER”
</em> “android.intent.category.HOME”<br><em> “android.intent.category.DEFAULT”<br><br>对于Lollipop来说还有：

</em> android.intent.action.SEND<br><em> android.intent.action.SEND_MULTIPLE<br><br>并发文档（concurrent documents）<br><br>如果无论如何都想创建新Task

</em> Intent.FLAG_ACTIVITY_NEW<br><em> Intent.FLAG_ACTIVITY_MULTIPLE_TASK<br>或
</em> documentLaunchMode=”always”<br><br></font>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/10/21-XML-drawable/" itemprop="url">
                  21. XML drawable
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-10T17:23:53+08:00" content="2016-10-10">
              2016-10-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>诚然这章听上去比较重要，但是实际就是几个文件，xml属性，了解了就OK了。</p>
<h1 id="shape-drawable-xxx-normal-xml"><a href="#shape-drawable-xxx-normal-xml" class="headerlink" title="shape drawable, xxx_normal.xml"></a>shape drawable, xxx_normal.xml</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">       android:shape=&quot;oval&quot;&gt;</div><div class="line"></div><div class="line">    &lt;solid</div><div class="line">        android:color=&quot;@color/dark_blue&quot;/&gt;</div><div class="line">&lt;/shape&gt;</div></pre></td></tr></table></figure>
<h1 id="state-list-drawable-xxx-xml"><a href="#state-list-drawable-xxx-xml" class="headerlink" title="state list drawable, xxx.xml"></a>state list drawable, xxx.xml</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</div><div class="line">    &lt;item android:drawable=&quot;@drawable/button_beat_box_pressed&quot;</div><div class="line">          android:state_pressed=&quot;true&quot;/&gt;</div><div class="line">    &lt;item android:drawable=&quot;@drawable/button_beat_box_normal&quot; /&gt;</div><div class="line">&lt;/selector&gt;</div></pre></td></tr></table></figure>
<h1 id="layer-list-drawable-xxx-pressed-xml"><a href="#layer-list-drawable-xxx-pressed-xml" class="headerlink" title="layer list drawable, xxx_pressed.xml"></a>layer list drawable, xxx_pressed.xml</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</div><div class="line">    &lt;item&gt;</div><div class="line">        &lt;shape</div><div class="line">            android:shape=&quot;oval&quot;&gt;</div><div class="line"></div><div class="line">            &lt;solid</div><div class="line">                android:color=&quot;@color/red&quot;/&gt;</div><div class="line">        &lt;/shape&gt;</div><div class="line">    &lt;/item&gt;</div><div class="line">    &lt;item&gt;</div><div class="line">        &lt;shape</div><div class="line">            android:shape=&quot;oval&quot;&gt;</div><div class="line"></div><div class="line">            &lt;stroke</div><div class="line">                android:width=&quot;4dp&quot;</div><div class="line">                android:color=&quot;@color/dark_red&quot;/&gt;</div><div class="line"></div><div class="line">        &lt;/shape&gt;</div><div class="line">    &lt;/item&gt;</div><div class="line">&lt;/layer-list&gt;</div></pre></td></tr></table></figure>
<p>真正是用的时候，只需如此：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;style name=&quot;BeatBoxButton&quot; parent=&quot;android:style/Widget.Holo.Button&quot;&gt;</div><div class="line">    &lt;item name=&quot;android:background&quot;&gt;@drawable/button_beat_box&lt;/item&gt;</div><div class="line">&lt;/style&gt;</div></pre></td></tr></table></figure>
<h1 id="9-patch"><a href="#9-patch" class="headerlink" title=".9 patch"></a>.9 patch</h1><p>top, left标记了图像的可伸缩区域，bottom, right定义了drawable区域，是绘制内容（通常是文字）的地方。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/10/20-Styles-and-Themes/" itemprop="url">
                  20. Styles and Themes
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-10T17:09:09+08:00" content="2016-10-10">
              2016-10-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>实话实说，这章真的不知道讲的是啥。记住两个名字 <code>style</code>&amp; <code>theme</code>，其中默认的theme应该就是 <code>AppTheme</code> 这个名字。搜了下我们的app里没有自定义的theme，倒是style里每个人貌似都加入了一些东东</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">android:theme=&quot;@style/AppTheme&quot;</div></pre></td></tr></table></figure>
<p>个人理解 style 就是把一堆相同的属性弄到一起，方便layout文件里拿来就用，免得啰嗦：</p>
<p>下面这个是真实项目中的一个例子，虽然，我依旧觉得命名如同狗屎：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;TextView</div><div class="line">	style=&quot;@style/workshop_detail_tv_1&quot;</div><div class="line">	android:text=&quot;@string/subject&quot; /&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;style name=&quot;workshop_detail_tv_1&quot;&gt;</div><div class="line">    &lt;item name=&quot;android:layout_width&quot;&gt;wrap_content&lt;/item&gt;</div><div class="line">    &lt;item name=&quot;android:layout_height&quot;&gt;@dimen/dimen_45dp&lt;/item&gt;</div><div class="line">    &lt;item name=&quot;android:layout_gravity&quot;&gt;center_vertical&lt;/item&gt;</div><div class="line">    &lt;item name=&quot;android:gravity&quot;&gt;center&lt;/item&gt;</div><div class="line">    &lt;item name=&quot;android:layout_marginLeft&quot;&gt;@dimen/dimen_15dp&lt;/item&gt;</div><div class="line">    &lt;item name=&quot;android:textColor&quot;&gt;@color/color_a1a7ae&lt;/item&gt;</div><div class="line">    &lt;item name=&quot;android:textSize&quot;&gt;@dimen/dimen_15sp&lt;/item&gt;</div><div class="line">&lt;/style&gt;</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/10/19-Audio-Playback-with-SoundPool/" itemprop="url">
                  19. Audio Playback with SoundPool
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-10T16:50:47+08:00" content="2016-10-10">
              2016-10-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><code>setRetainInstance(true)</code><br>新的Activity -&gt; 新的FragmentManager -&gt; <font color="orange">老的</font>Fragment -&gt; 新的RecyclerView</p>
<p><code>setRetainInstance(false)</code> 这个是默认<br>新的Activity -&gt; 新的FragmentManager -&gt; <font color="orange">新的</font>Fragment -&gt; 新的RecyclerView</p>
<p>保留的fragment只能处理activity因设备旋转而销毁的情况。如果activity是因操作系统需要回收内存而被销毁，则所有保留的fragment也会随之销毁。</p>
<p>这章最终升华为：何时用 <code>onSaveInstanceState</code>，何时用 <code>setRetainInstance(true)</code></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/10/18-Assets/" itemprop="url">
                  18. Assets
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-10T10:39:33+08:00" content="2016-10-10">
              2016-10-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Android有assets和resources两大资源系统<br>这章其实讲assets的地方并没啥复杂，记住以下几个函数就好了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">AssetManager am = getActivity().getAssets();</div><div class="line">   String[] filepaths = null;</div><div class="line">   try &#123;</div><div class="line">       filepaths = am.list(&quot;sample_sounds&quot;);</div><div class="line">   &#125; catch (IOException e) &#123;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>不过正好是个机会，再次回顾一下recyclerview，如果说ios中70%的情况都是和tableview打交道，那么recyclerview就是android中的tableview，多写多熟练就好了。</p>
<font color="red"><br>先记录个坑:<br><br>appcompat, recyclerview的版本需要保持一致，否则运行时会出 <code>FAILURE xxxxx Multiple dex files define</code> 这种错误。<br><br>需要把两个依赖lib都”-“了，重新”+”一遍。<br></font>

<p>包含activity，fragment，list_item</p>
<h3 id="activity里就是个-FrameLayout-id就是fragment-container"><a href="#activity里就是个-FrameLayout-id就是fragment-container" class="headerlink" title="activity里就是个 FrameLayout, id就是fragment_container"></a>activity里就是个 FrameLayout, id就是fragment_container</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;FrameLayout</div><div class="line">    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    android:id=&quot;@+id/fragment_container&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;match_parent&quot; /&gt;</div></pre></td></tr></table></figure>
<h3 id="fragment里就是个recyclerview"><a href="#fragment里就是个recyclerview" class="headerlink" title="fragment里就是个recyclerview"></a>fragment里就是个recyclerview</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;android.support.v7.widget.RecyclerView </div><div class="line">    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    android:id=&quot;@+id/recycler_view_beat_box&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;match_parent&quot; /&gt;</div></pre></td></tr></table></figure>
<h3 id="list-item里就是个Button"><a href="#list-item里就是个Button" class="headerlink" title="list_item里就是个Button"></a>list_item里就是个Button</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;Button </div><div class="line">    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    android:id=&quot;@+id/sound_button&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;100dp&quot; /&gt;</div></pre></td></tr></table></figure>
<h3 id="在activity的onCreate中，为fragment-container添加fragment"><a href="#在activity的onCreate中，为fragment-container添加fragment" class="headerlink" title="在activity的onCreate中，为fragment_container添加fragment"></a>在activity的onCreate中，为fragment_container添加fragment</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">FragmentManager fm = getSupportFragmentManager();</div><div class="line">Fragment f = fm.findFragmentById(R.id.fragment_container);</div><div class="line">if (f == null) &#123;</div><div class="line">    f = new BeatBoxFragment();</div><div class="line">    fm.beginTransaction()</div><div class="line">            .add(R.id.fragment_container, f)</div><div class="line">            .commit();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="在fragment的onCreateView中，配置好recyclerview用GridLayoutManager，并且设置recyclerview的adapter，然后返回从fragment-inflate出来的view"><a href="#在fragment的onCreateView中，配置好recyclerview用GridLayoutManager，并且设置recyclerview的adapter，然后返回从fragment-inflate出来的view" class="headerlink" title="在fragment的onCreateView中，配置好recyclerview用GridLayoutManager，并且设置recyclerview的adapter，然后返回从fragment inflate出来的view"></a>在fragment的onCreateView中，配置好recyclerview用GridLayoutManager，并且设置recyclerview的adapter，然后返回从fragment inflate出来的view</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) &#123;</div><div class="line">    View v = inflater.inflate(R.layout.fragment_beat_box, container, false);</div><div class="line">    RecyclerView rv = (RecyclerView)v.findViewById(R.id.recycler_view_beat_box);</div><div class="line">    rv.setLayoutManager(new GridLayoutManager(getActivity(), 3));</div><div class="line">    rv.setAdapter(new SoundAdaptor());</div><div class="line">    return v;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ViewHolder，初始化时搞定各个子view和iVal的关联，bindModel时，根据model设置view相关属性"><a href="#ViewHolder，初始化时搞定各个子view和iVal的关联，bindModel时，根据model设置view相关属性" class="headerlink" title="ViewHolder，初始化时搞定各个子view和iVal的关联，bindModel时，根据model设置view相关属性"></a>ViewHolder，初始化时搞定各个子view和iVal的关联，bindModel时，根据model设置view相关属性</h3><h3 id="Adaptor，onCreateViewHolder时，inflate出list-item作为ViewHolder初始化参数；onBindViewHolder在model队列里找出相应item并对ViewHolder-bindModel；getItemCount返回model队列里item个数"><a href="#Adaptor，onCreateViewHolder时，inflate出list-item作为ViewHolder初始化参数；onBindViewHolder在model队列里找出相应item并对ViewHolder-bindModel；getItemCount返回model队列里item个数" class="headerlink" title="Adaptor，onCreateViewHolder时，inflate出list_item作为ViewHolder初始化参数；onBindViewHolder在model队列里找出相应item并对ViewHolder bindModel；getItemCount返回model队列里item个数"></a>Adaptor，onCreateViewHolder时，inflate出list_item作为ViewHolder初始化参数；onBindViewHolder在model队列里找出相应item并对ViewHolder bindModel；getItemCount返回model队列里item个数</h3><p>好像也就这么简单 <del>~ ~</del> 还是那句话，名字很重要，等本书学完一遍，结合Flux流程，要好好review一下coding standard并严格执行 <del>~ ~</del></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/08/国庆回来/" itemprop="url">
                  国庆回来
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-08T11:23:08+08:00" content="2016-10-08">
              2016-10-08
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>国庆回来，满满的罪恶感，本来计划在家里好好看书学习的。但是确实没有心情与心境。放纵一天，干脆破罐子破摔，整个假期就是吃、喝、玩、乐。书不仅一页未读，甚至把节前看的还回去了一多半。</p>
<p>好在做笔记就这点好处，你可以快速的回顾一遍之前的重点。</p>
<p>人老了，记性不好，只能靠规矩来加强自己的战斗点数了。</p>
<p>所以节后回来，花一天的时间回顾一下之前的章节，然后需要抓紧开始下面的部分。</p>
<p>Flux架构的理解与应用又提到一个紧张的日程之上了 ~~~ 好在最终决定android暂时先不大规模重构，也算有口喘息之机吧。</p>
<hr>
<p>然后研究Flux，各种源码，又花费了整整2天，现在感觉Java Android的Flux已经基本胸有成竹了，最终限制的目前还是android开发，以及更高层的java语言的种种细节了。</p>
<p>今天开始继续 《Android Programming - The Big Nerd Ranch Guide, 2nd Edition》</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/27/17-Two-Pane-Master-Detail-Interfaces/" itemprop="url">
                  17. Two-Pane Master-Detail Interfaces
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-27T16:11:33+08:00" content="2016-09-27">
              2016-09-27
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天的最后一章，这章应该蛮有意思，但是应该只是展示了用fragment的好处。也就一并看了。</p>
<p>别名，这样相同的R.layout.XXXXX对于不同的环境就能inflate出不同layout.xml了。</p>
<p>refs.xml，用以前的 <code>activity_fragment</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;resources&gt;</div><div class="line">    &lt;item name=&quot;activity_masterdetail&quot; type=&quot;layout&quot;&gt;@layout/activity_fragment&lt;/item&gt;</div><div class="line">&lt;/resources&gt;</div></pre></td></tr></table></figure>
<p>refs.xml(sw600dp)，用pad的 <code>activity_twopane</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;resources&gt;</div><div class="line">    &lt;item name=&quot;activity_masterdetail&quot; type=&quot;layout&quot;&gt;@layout/activity_twopane&lt;/item&gt;</div><div class="line">&lt;/resources&gt;</div></pre></td></tr></table></figure>
<p>在Fragment里声明Callbacks接口，Activity实现Callbacks接口，然后由Fragment产生的事件通过Callbacks让Activity负责调度处理。</p>
<p>在CrimeListFragment中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">public void onAttach(Activity activity) &#123;</div><div class="line">    super.onAttach(activity);</div><div class="line">    mCallbacks = (Callbacks) activity;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@Override</div><div class="line">public void onDetach() &#123;</div><div class="line">    super.onDetach();</div><div class="line">    mCallbacks = null;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>CrimeListFragment点了哪个row -&gt; Callbacks -&gt; Activity -&gt; 显示相应的CrimeFragment<br>CrimeFragment修改crime信息 -&gt; Callbacks -&gt; Activity -&gt; 更新CrimeListFragment中对应的row</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/27/16-Taking-Pictures-with-Intents/" itemprop="url">
                  16. Taking Pictures with Intents
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-27T15:43:36+08:00" content="2016-09-27">
              2016-09-27
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>还是这样，这些具体的技巧，等到用的时候再详细了解也不迟，所以今天一天就多过几章。好读，不求甚解了。</p>
<p>layout文件的include引入</p>
<font color="Green"><br>    <code>&lt;include layout=&quot;@layout/view_camera_and_title&quot; /&gt;</code><br></font>


<p>照相机的隐式Intent：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Intent(MediaStore.ACTION_IMAGE_CAPTURE)</div></pre></td></tr></table></figure>
<p>权限：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;</div><div class="line">                 android:maxSdkVersion=&quot;18&quot;</div><div class="line">    /&gt;</div></pre></td></tr></table></figure>
<p>这里有个复杂的Bitmap处理，完全没有理解 ~~~ 擦。简言之，就是用 <code>BitmapFactory</code> 把图片压缩成bitmap适合的大小，当然根据屏幕猜测了下bitmap的大小。</p>
<p>目的主要是保证bitmap不要过大，占据太多内存。所以估算的也可用吧。（软件做了差值？）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;uses-feature android:name=&quot;android.hardware.camera&quot;</div><div class="line">              android:required=&quot;false&quot;</div><div class="line">    /&gt;</div></pre></td></tr></table></figure>
<p>其中 <code>android:required</code> 如果为 <code>true</code> 的话，在google play商店中，没有拍照功能的硬件就安装不了此应用。</p>
<font color="Green"><br>ViewTreeObserver<br><br>OnGlobalLayoutListener可以监听布局的传递、控制事件的发生<br></font>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="cailei" />
          <p class="site-author-name" itemprop="name">cailei</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">30</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">cailei</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
